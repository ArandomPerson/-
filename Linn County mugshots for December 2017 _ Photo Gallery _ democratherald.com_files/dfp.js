var __tnt=window.__tnt||{};__tnt.ads=window.__tnt.ads||{},__tnt.ads.dfp=window.__tnt.ads.dfp||{};var googletag=window.googletag||{};googletag.cmd=window.googletag.cmd||[],function(t,e,d){"use strict";function i(e,d){/[?&]dfp_log/.test(window.location.search)&&window.console&&t(e).each(function(t,e){"error"===d?window.console.error(e):"warning"===d?window.console.warn(e):window.console.log(e)})}function o(e){try{var d={rendered:!1,visible:!1,lazy:!1,debounce:!1};if(!e.id)throw["No id on the dfp-ad div:",t(e)[0].outerHTML];if(d.id=e.id,d.adunit=t(e).data("dfp-adunit"),!d.adunit)throw["No usable adunit found for "+e.id+".",t(e)[0].outerHTML];if(d.size=t(e).data("dfp-size"),"object"!=typeof d.size&&"fluid"!=d.size)throw["data-dfp-size needs to ba a valid JSON array or fluid for position "+e.id+".",t(e)[0].outerHTML];return d.pos=t(e).data("dfp-custom-pos"),d.pos?d.pos=t.trim(d.pos).split(/\s*,\s*/):i(["Unable to set pos for "+e.id+".",t(e)[0].outerHTML],"warning"),t(e).data("lazy")&&(d.lazy="true"),d}catch(t){return i(t,"error"),!1}}function s(e){if((e=t("#"+e)).hasClass("dfp-unit-requested")||e.data("google-query-id"))return i(["Ad: "+e.attr("id")+" already loaded."]),!1;if(!e.data("lazy"))return i(["Ad: "+e.attr("id")+" not lazy loaded."]),!0;var d=e.offset().top,o=d+e.outerHeight(),s=t(window).scrollTop(),n=s+t(window).height();return o>s&&d<n}function n(){t.each(d.slots,function(t,e){s(e.id)&&(i(["Ad: "+e.id+" is now visible."]),u(e.id))})}function a(t){var e=d.slots[t].pos;if(!e)return!1;switch(e[0]){case"fixed-leaderboard-top":case"fixed-leaderboard-bottom":case"fixed-big-ad-top":case"fixed-big-ad-middle":case"fixed-big-ad-bottom":case"breakout_middle":return!0}return!1}function r(o){var s=d.slots[o].size;t.isArray(s[0])||(s=[s]),window.APS_dfp_ads[o]={slotID:o,sizes:s},window.apstag.fetchBids({slots:[window.APS_dfp_ads[o]],timeout:2e3},function(t){window.apstag.setDisplayBids(),e.pubads().refresh([d.slots[o].dfp_slot]),i(["APS bid: "+o])})}function l(t){b&&a(t)?r(t):e.pubads().refresh([d.slots[t].dfp_slot])}function u(t){e.cmd.push(function(){d.slots[t].debounce||(d.slots[t].debounce=!0,l(t))})}function f(t,e){var d;return function(){var i=this,o=arguments;clearTimeout(d),d=setTimeout(function(){d=null,t.apply(i,o)},e)}}var c=".dfp-ad",p=0,w=0,g=0,b="APS_dfp_ads"in window;t(c).each(function(){if(p++,t(this).is(":visible")||"no"===t(this).data("dfp-responsive")){g++;var e=o(this);e?d.slots[e.id]=e:g--}else w++}),d.count=p,d.visible=g,d.hidden=w,d.visible>0&&(e.cmd.push(function(){t.each(d.slots,function(t,i){var o=d.slots[i.id];o.dfp_slot=e.defineSlot(i.adunit,i.size,i.id).addService(e.pubads()),i.pos&&o.dfp_slot.setTargeting("pos",i.pos),i.lazy||o.dfp_slot.setTargeting("inview","true")}),d.targeting&&t.each(d.targeting,function(t,d){e.pubads().setTargeting(t,d)}),e.pubads().disableInitialLoad(),e.pubads().enableSingleRequest(),e.pubads().collapseEmptyDivs(),e.enableServices()}),e.cmd.push(function(){t.each(d.slots,function(t,e){googletag.display(e.id)}),e.pubads().addEventListener("slotRenderEnded",function(e){var o=e.slot.getSlotElementId();d.slots[o].debounce=!1,t("#"+o).addClass("dfp-unit-requested"),e.isEmpty||(i(["Load unit: "+o]),d.slots[o].rendered={size:e.size,empty:e.isEmpty,creative:e.creativeId,line_item:e.lineItemId},t("#"+o).addClass("dfp-rendered").addClass("dfp-creative-"+e.creativeId).addClass("dfp-line-item-"+e.lineItemId))})})),n(),e.cmd.push(function(){var t=f(function(){n()},50);window.addEventListener("scroll",t)})}(jQuery,googletag,__tnt.ads.dfp);